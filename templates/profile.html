<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="profilestyle.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/6ad0a05750.js" crossorigin="anonymous"></script>
    <title style="font-family: Georgia, 'Times New Roman', Times, serif;">Public NEWS</title>
    <link rel="icon" href="{{ url_for('static',filename='icon.png')}}" type="image/icon type">
    <meta id="my-data" data-name="{{otheruser}}">

</head>

<body>

    <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">

        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="/"
            style="font-family: Georgia, 'Times New Roman', Times, serif;">Public NEWS</a>
        <button class="navbar-toggler position-absolute d-md-none collapsed py-0" type="button" data-toggle="collapse"
            data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <ul class="navbar-nav px-3">
            {% if otheruser %}
            <li class="nav-item text-nowrap">
                <a class="nav-link" onclick="goBack()" style="color: ivory; text-decoration:none;cursor:pointer;">GO
                    Back</a>
            </li>
            {% else %}
            <li class="nav-item text-nowrap">
                <a class="nav-link" href="/logout" style="color: ivory;">Log out</a>
            </li>
            {% endif %}

        </ul>
    </header>

    <div class="container-fluid">
        <div class="row">
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse"
                class="navbar navbar-expand-lg navbar-light ">
                <div class="position-sticky pt-3" class="collapse navbar-collapse" id="sidebarMenu">
                    <ul class="nav flex-column" class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" onclick="Tab(0)"
                                style="font-family: Georgia, 'Times New Roman', Times, serif; cursor:pointer;">
                                <span><i class="fas fa-user" style="font-size: 25px;"></i></span>
                                Profile
                            </a>
                        </li>
                        {% if otheruser %}
                        {% else %}
                        <li class="nav-item">
                            <a class="nav-link" onclick="Tab(1)"
                                style="font-family: Georgia, 'Times New Roman', Times, serif; cursor:pointer;">
                                <span><i class="fas fa-folder" style="font-size: 25px;"></i></span>
                                Reading List
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" onclick="Tab(2)"
                                style="font-family: Georgia, 'Times New Roman', Times, serif; cursor:pointer;">
                                <span><i class="fas fa-user-friends" style="font-size: 25px;"></i></span>
                                Following
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" onclick="Tab(3)"
                                style="font-family: Georgia, 'Times New Roman', Times, serif; cursor:pointer;">
                                <span><i class="fas fa-users" style="font-size: 27px;"></i></span>
                                Followers
                            </a>
                        </li>
                        {% endif %}
                    </ul>
                    {% if otheruser %}
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"
                        style="font-family: Georgia, 'Times New Roman', Times, serif;">
                        <span style="font-size: 15px;">NEWS UPLOADED</span>
                    </h6>
                    {% else %}
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"
                        style="font-family: Georgia, 'Times New Roman', Times, serif;">
                        <span style="font-size: 15px;">Your NEWS</span>
                        <a class="link-secondary" href="/addnews" aria-label="Add a new report">
                            <i class="fas fa-plus" style="font-size: 15px;"></i>
                        </a>
                    </h6>
                    {% endif %}
                    <ul class="nav flex-column mb-2">
                        {% for Article in Article %}
                        <li class="nav-item">
                            <a class="nav-link" href="/news/{{Article.News_ID}}">
                                <span data-feather="file-text"></span>
                                {{Article.Title}}
                            </a>
                        </li>
                        {% endfor %}
                    </ul>

                </div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="tab">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2" style="font-family: Georgia, 'Times New Roman', Times, serif;">
                            <span><i class="fas fa-user" style="font-size: 25px;"></i></span>Profile
                        </h1>
                        {% if otheruser %}
                        <form method="POST" id="tp1">
                            <input type="hidden" value="{{User.ID_Number}}" name="follow">
                            <input type="hidden" value="1" name="fol">
                            <input type="radio" name="op" value="Follow">
                              <label for="follow">FOLLOW</label><br>
                            <input type="radio" name="op" value="Unfollow">
                              <label for="follow">UNFOLLOW</label><br>
                            <button class="w btn btn-primary btn-lg" type="submit">Done</button>
                        </form>
                        {% endif %}
                    </div>
                    <div class="card mb-3">
                        <div style="margin-top: 20px;"></div>
                        {% if User.Profile_img %}
                        <img src="{{url_for('static',filename= User.Profile_img)}}" class="card-img-top"
                            style="max-width: 400px; height: 200px; margin:auto;">
                        {% else %}
                        <img src="{{url_for('static',filename='avtar.png')}}" class="card-img-top"
                            style="max-width: 200px; max-height: 200px; margin:auto; border-radius:100%;">
                        {% endif %}
                        <div class="card-body" style="font-family: 'Times New Roman', Times, serif;">
                            <h5 class="card-title">Name : {{User.Name}}</h5>
                            <h5 class="card-text">ID No.: {{User.ID_Number}}</h5>
                            <h5 class="card-text">Country: {{User.Country}}</h5>
                            {% if otheruser %}
                            {% else %}
                            <h5 class="card-text">Phone No.:{{User.Phone_no}}</h5>
                            {% endif %}
                            <h5 class="card-text">Email : {{User.Email}}</h5>
                            <h5 class="card-text">Bio :</h5>
                            <p class="card-text">{{User.Bio}}</p>
                            <hr class="my-4">
                            {% if otheruser %}
                            {% else %}
                            <button class="w btn btn-primary btn-lg" type="button" onclick="Tab(4)">Edit
                                Profile</button>
                            {% endif %}
                        </div>

                    </div>
                </div>
                <div class="tab">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2" style="font-family: Georgia, 'Times New Roman', Times, serif;">
                            <span><i class="fas fa-folder" style="font-size: 25px;"></i></span>Reading List
                        </h1>
                    </div>
                    <div>
                        {% for Read in Reading %}
                        {% for Article in Allnews if Read.News_ID == Article.News_ID %}
                        <div class="card mb-3" style="max-width: 100%;">
                            <div class="row g-0">
                                <div class="col-md-4">
                                    <img src="{{Article.Thumbnail}}" alt="..." style="width: 100%;">
                                </div>
                                <div class="col-md-8">
                                    <div class="card-body">
                                        <h5 class="card-title">{{Article.Title}}</h5>
                                        <p class="card-text">Origin : {{Article.Location}} , Tag : {{Article.Tag}}</p>
                                        <p class="card-text"><small class="text-muted">NEWS DATE :
                                                {{Article.Date}}</small></p>
                                        <a href="/news/{{Article.News_ID}}" class="stretched-link">Continue reading</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                        {% endfor %}
                    </div>
                </div>
                <div class="tab">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2" style="font-family: Georgia, 'Times New Roman', Times, serif;">
                            <span><i class="fas fa-user-friends" style="font-size: 25px;"></i></span>Following
                        </h1>
                    </div>
                    {% for Followed in Followed %}
                    {% for User in Alluser if User.ID_Number == Followed.Followed_ID %}
                    <a href="/profile/{{Followed.Followed_ID}}" style="color: black; text-decoration:none;">
                        <div class="card mb-3" style="max-width: 100%; border-radius:100px; border-style:solid;">
                            <div class="row g-0">
                                <div class="col-md-4">
                                    {% if User.Profile_img %}
                                    <img src="{{url_for('static',filename=User.Profile_img)}}" alt="..."
                                        style="width: 100%;">
                                    {% else %}
                                    <img src="{{url_for('static',filename='avtar.png')}}" alt="..."
                                        style="width: 100%;">
                                    {% endif %}
                                </div>
                                <div class="col-md-8">
                                    <div class="card-body">
                                        <h5 class="card-title">{{User.Name}}</h5>
                                        <p class="card-text">Citizen : {{User.Country}}</p>
                                        <p class="card-text">Bio : {{User.Bio}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                    {% endfor %}
                </div>
                <div class="tab">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2" style="font-family: Georgia, 'Times New Roman', Times, serif;">
                            <span><i class="fas fa-users" style="font-size: 27px;"></i></span>Followers
                        </h1>
                    </div>
                    {% for Follower in Follower %}
                    {% for User in Alluser if User.ID_Number == Follower.User_ID %}
                    <a href="/profile/{{Follower.Followed_ID}}" style="color: black; text-decoration:none;">
                        <div class="card mb-3" style="max-width: 100%;">
                            <div class="row g-0">
                                <div class="col-md-4">
                                    {% if User.Profile_img %}
                                    <img src="{{url_for('static',filename=User.Profile_img)}}" alt="..."
                                        style="width: 100%;">
                                    {% else %}
                                    <img src="{{url_for('static',filename='avtar.png')}}" alt="..."
                                        style="width: 100%;">
                                    {% endif %}
                                </div>
                                <div class="col-md-8">
                                    <div class="card-body">
                                        <h5 class="card-title">{{User.Name}}</h5>
                                        <p class="card-text">Citizen : {{User.Country}}</p>
                                        <p class="card-text">Bio : {{User.Bio}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                    {% endfor %}
                </div>
                <div class="tab">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2" style="font-family: Georgia, 'Times New Roman', Times, serif;">
                            <span><i class="fas fa-user-edit" style="font-size: 30px;"></i></span>Edit Profile
                        </h1>
                        <div id="myDiv"></div>
                    </div>
                    <div class="card mb-3">
                        <div style="margin-top: 20px;"></div>
                        <div class="card-body" style="font-family: 'Times New Roman', Times, serif;">
                            <form class="needs-validation" novalidate method="POST" enctype="multipart/form-data"
                                id="tp2">
                                <div class="col-12">
                                    <label for="id_number" class="form-label">ID Number</label>
                                    <div class="input-group has-validation">
                                        <input type="text" class="form-control" name="ID_Number"
                                            value="{{User.ID_Number}}" readonly>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <label for="profile" class="form-label">Profile Image(Name of your image file is
                                        should be your ID Number)</label>
                                    <input type="file" class="form-control" name="profile">
                                </div>
                                <div class="col-12">
                                    <label for="name" class="form-label">Name</label>
                                    <input type="text" class="form-control" id="title" name="name"
                                        placeholder="Enter Your Name" value="{{User.Name}}">
                                </div>

                                <div class="col-12">
                                    <label for="country" class="form-label">Country</label>
                                    <input type="text" class="form-control" name="country" value="{{User.Country}}"
                                        placeholder="Enter your Country ">
                                </div>
                                <div class="col-12">
                                    <label for="phone_no" class="form-label">Phone Number</label>
                                    <input type="text" class="form-control" name="phone_no" value="{{User.Phone_no}}"
                                        placeholder="Enter your Phone Number ">
                                </div>
                                <div class="col-12">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="text" class="form-control" name="email" value="{{User.Email}}"
                                        placeholder="Enter your Email Adress ">
                                </div>
                                <div class="col-12">
                                    <label for="bio" class="form-label">Bio</label>
                                    <textarea type="text" class="form-control" name="bio" value="{{User.Bio}}"
                                        style="resize: none; height:100px;"></textarea>
                                </div>
                                <hr class="my-4">
                                <input type="hidden" value="2" name="fol">
                                <button class="w btn btn-primary btn-lg" type="submit">Update Profile</button>
                        </div>

                        </form>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script type="text/javascript">
        var other = $('#my-data').data();
        if (other) {
            $(document).ready(function () {
                $("#tp1 :input").prop("disabled", false);
            });
        }
        else {
            $(document).ready(function () {
                $("#tp2 :input").prop("disabled", false);
            });
        }

        var first = 0;
        Tab(first);
        function Tab(n) {
            var x = document.getElementsByClassName("tab");
            var y = document.getElementsByClassName("nav-link");
            var i;
            for (i = 0; i < x.length; i++) { x[i].style.display = "none"; } for (i = 0; i < y.length; i++) {
                y[i].style.color = "#333";
            } x[n].style.display = "block"; y[n + 1].style.color = "#007bff";
            y[0].style.color = "white";
        }
        function goBack() {
            window.history.back();
        }

    </script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
</body>

</html>